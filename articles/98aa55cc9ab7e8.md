---
title: "Discordã®ã‚¤ãƒ™ãƒ³ãƒˆã¨å¯¾å¿œã™ã‚‹discordgoã®æ§‹é€ ä½“"
emoji: "ğŸ›’"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["go", "discord", "bot"]
published: true
---

# ã¯ã˜ã‚ã«

Go ã§ Discord Bot ã‚’ä½œã‚‹å ´åˆ[`discordgo`](https://github.com/bwmarrin/discordgo)ã‚’ä½¿ã†ã®ã§ã™ãŒï¼Œæ¬²ã—ã„ã‚¤ãƒ™ãƒ³ãƒˆã‚’ã©ã®ã‚ˆã†ã«å—ã‘å–ã‚Œã°ã„ã„ã®ã‹ã‚ã‹ã‚‰ãšå°‘ã—è©°ã¾ã£ãŸãŸã‚å‚™å¿˜éŒ²çš„ãªæ„Ÿã˜ã§æ®‹ã—ã¦ãŠã“ã†ã¨æ€ã„ã¾ã™ï¼

# Discord API **ã§å—ã‘å–ã‚Œã‚‹ã‚¤ãƒ™ãƒ³ãƒˆ**

è©³ç´°ã¯[ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://discord.com/developers/docs/topics/gateway-events#receive-events)ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ï¼
ã‚ˆãï¼Œä½¿ã„ãã†ãªã‚‚ã®ã‚’æŠœç²‹ã™ã‚‹ã¨

| ã‚¤ãƒ™ãƒ³ãƒˆå                                                                                         | æ¦‚è¦                                       |
| :------------------------------------------------------------------------------------------------- | :----------------------------------------- |
| [Message Create](https://discord.com/developers/docs/topics/gateway-events#message-create)         | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒä½œæˆã•ã‚ŒãŸ                     |
| [Message Update](https://discord.com/developers/docs/topics/gateway-events#message-update)         | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒç·¨é›†ã•ã‚Œã¾ã—ãŸ                 |
| [Message Delete](https://discord.com/developers/docs/topics/gateway-events#message-delete)         | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå‰Šé™¤ã•ã‚ŒãŸ                     |
| [Typing Start](https://discord.com/developers/docs/topics/gateway-events#typing-start)             | ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒãƒ£ãƒ³ãƒãƒ«ã«å…¥åŠ›ã‚’å§‹ã‚ãŸ         |
| [Voice State Update](https://discord.com/developers/docs/topics/gateway-events#voice-state-update) | èª°ã‹ãŒéŸ³å£°ãƒãƒ£ãƒ³ãƒãƒ«ã«å‚åŠ ã€é€€å‡ºã€ç§»å‹•ã—ãŸ |

ãªã©ã§ã™ï¼ã“ã‚Œä»¥å¤–ã«ã‚‚ Discord API ã‹ã‚‰å—ã‘å–ã‚‹ã“ã¨ã®ã§ãã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã¯æ•°å¤šãæœ‰ã‚‹ãŸã‚å¿…è¦ãªã‚¤ãƒ™ãƒ³ãƒˆãŒã‚ã‹ã‚‰ãªã„å ´åˆã¯å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚“ã§ã¿ã‚‹ã¨è‰¯ã„ã¨æ€ã„ã¾ã™ï¼

# disordgo ã¨ã®å¯¾å¿œ

discordgo ã®æ§‹é€ ä½“ã¨ã‚¤ãƒ™ãƒ³ãƒˆã®å¯¾å¿œè¡¨ã¯[ä»˜éŒ²: å¯¾å¿œè¡¨](#å¯¾å¿œè¡¨)ã«ã¾ã¨ã‚ã¦ã‚ã‚Šã¾ã™ï¼å®Œå…¨ã«è‡ªåŠ›ã§èª¿æŸ»ã‚’è¡Œã£ãŸãŸã‚é–“é•ã„ãªã©ãŒæœ‰ã‚‹ã¨æ€ã„ã¾ã™ãŒãã®å ´åˆã¯ ã‚³ãƒ¡ãƒ³ãƒˆ ãªã©ã§é€£çµ¡ã—ã¦ã„ãŸã ã‘ã‚‹ã¨å¹¸ã„ã§ã™ï¼

# discordgo å†…éƒ¨ã®å®Ÿè£…

å°‘ã—ã ã‘ï¼Œdiscordgo å†…éƒ¨ã®å®Ÿè£…ã«é–¢ã—ã¦èª¬æ˜ã—ã¦ãŠããŸã„ã¨æ€ã„ã¾ã™ï¼
ã¾ãšï¼Œdiscordgo ã§ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’å®šç¾©ã™ã‚‹ã«ã¯`discordgo.Session`æ§‹é€ ä½“ã®`AddHandler`é–¢æ•°ã‚’å‘¼ã³å‡ºã™ã“ã¨ã§ç™»éŒ²ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼
ã“ã“ã§ï¼Œ`AddHandler`é–¢æ•°ã®å®šç¾©ã‚’ç¢ºèªã™ã‚‹ã¨ï¼Œ[discordgo ã® event.go](https://github.com/bwmarrin/discordgo/blob/master/event.go)ã«ä»¥ä¸‹ã®ã‚ˆã†ã«å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ï¼

```go:event.go
func (s *Session) AddHandler(handler interface{}) func() {
	eh := handlerForInterface(handler)

	if eh == nil {
		s.log(LogError, "Invalid handler type, handler will never be called")
		return func() {}
	}

	return s.addEventHandler(eh)
}
```

`interface{}`å‹ã‚’å—ã‘å–ã‚Šé–¢æ•°ã‚’è¿”ã—ã¦ã„ã¾ã™ï¼ã“ã®é–¢æ•°ã¯ï¼Œã‚³ãƒ¡ãƒ³ãƒˆã«ã‚‚æ›¸ã‹ã‚Œã¦ã„ã‚‹ã¨ãŠã‚Šå‘¼ã³å‡ºã™ã“ã¨ã§ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’å‰Šé™¤ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼
ã¾ãŸï¼Œã“ã®ä¸­ã§`handlerForInterface`é–¢æ•°ãŒ`interface{}`å‹ã‹ã‚‰å„ãƒãƒ³ãƒ‰ãƒ©ãƒ¼å‹ã«ãƒ€ã‚¦ãƒ³ã‚­ãƒ£ã‚¹ãƒˆã—ã¦ã„ã¾ã™ï¼

# æœ€å¾Œã«

ãªã«ã‹ï¼Œé–“é•ã£ã¦ã„ã‚‹ç‚¹ãŒã‚ã‚Œã°ã‚³ãƒ¡ãƒ³ãƒˆç­‰ã§æ•™ãˆã¦ã„ãŸã ã‘ã‚‹ã¨å¹¸ã„ã§ã™ï¼

# ä»˜éŒ²

## å¯¾å¿œè¡¨

å®Ÿè£…ã•ã‚Œã¦ã„ãªã„ã‚‚ã®ã«é–¢ã—ã¦ã¯ç©ºç™½

| ã‚¤ãƒ™ãƒ³ãƒˆå                                                                                                                                 | æ§‹é€ ä½“å                              |
| ------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------- |
| [Hello](https://discord.com/developers/docs/topics/gateway-events#hello)                                                                   |                                       |
| [Ready](https://discord.com/developers/docs/topics/gateway-events#ready)                                                                   | `Ready`                               |
| [Resumed](https://discord.com/developers/docs/topics/gateway-events#resumed)                                                               | `Resumed`                             |
| [Reconnect](https://discord.com/developers/docs/topics/gateway-events#reconnect)                                                           |                                       |
| [Invalid Session](https://discord.com/developers/docs/topics/gateway-events#invalid-session)                                               |                                       |
| [Application Command Permissions Update](https://discord.com/developers/docs/topics/gateway-events#application-command-permissions-update) | `ApplicationCommandPermissionsUpdate` |
| [Auto Moderation Rule Create](https://discord.com/developers/docs/topics/gateway-events#auto-moderation-rule-create)                       | `AutoModerationRuleCreate`            |
| [Auto Moderation Rule Update](https://discord.com/developers/docs/topics/gateway-events#auto-moderation-rule-update)                       | `AutoModerationRuleUpdate`            |
| [Auto Moderation Rule Delete](https://discord.com/developers/docs/topics/gateway-events#auto-moderation-rule-delete)                       | `AutoModerationRuleDelete`            |
| [Auto Moderation Action Execution](https://discord.com/developers/docs/topics/gateway-events#auto-moderation-action-execution)             | `AutoModerationActionExecution`       |
| [Channel Create](https://discord.com/developers/docs/topics/gateway-events#channel-create)                                                 | `ChannelCreate`                       |
| [Channel Update](https://discord.com/developers/docs/topics/gateway-events#channel-update)                                                 | `ChannelUpdate`                       |
| [Channel Delete](https://discord.com/developers/docs/topics/gateway-events#channel-delete)                                                 | `ChannelDelete`                       |
| [Channel Pins Update](https://discord.com/developers/docs/topics/gateway-events#channel-pins-update)                                       | `ChannelPinsUpdate`                   |
| [Thread Create](https://discord.com/developers/docs/topics/gateway-events#thread-create)                                                   | `ThreadCreate`                        |
| [Thread Update](https://discord.com/developers/docs/topics/gateway-events#thread-update)                                                   | `ThreadUpdate`                        |
| [Thread Delete](https://discord.com/developers/docs/topics/gateway-events#thread-delete)                                                   | `ThreadDelete`                        |
| [Thread List Sync](https://discord.com/developers/docs/topics/gateway-events#thread-list-sync)                                             | `ThreadListSync`                      |
| [Thread Member Update](https://discord.com/developers/docs/topics/gateway-events#thread-member-update)                                     | `ThreadMemberUpdate`                  |
| [Thread Members Update](https://discord.com/developers/docs/topics/gateway-events#thread-members-update)                                   | `ThreadMembersUpdate`                 |
| [Entitlement Create](https://discord.com/developers/docs/topics/gateway-events#entitlement-create)                                         |                                       |
| [Entitlement Update](https://discord.com/developers/docs/topics/gateway-events#entitlement-update)                                         |                                       |
| [Entitlement Delete](https://discord.com/developers/docs/topics/gateway-events#entitlement-delete)                                         |                                       |
| [Guild Create](https://discord.com/developers/docs/topics/gateway-events#guild-create)                                                     | `GuildCreate`                         |
| [Guild Update](https://discord.com/developers/docs/topics/gateway-events#guild-update)                                                     | `GuildUpdate`                         |
| [Guild Delete](https://discord.com/developers/docs/topics/gateway-events#guild-delete)                                                     | `GuildDelete`                         |
| [Guild Audit Log Entry Create](https://discord.com/developers/docs/topics/gateway-events#guild-audit-log-entry-create)                     | `GuildAuditLogEntryCreate`            |
| [Guild Ban Add](https://discord.com/developers/docs/topics/gateway-events#guild-ban-add)                                                   | `GuildBanAdd`                         |
| [Guild Ban Remove](https://discord.com/developers/docs/topics/gateway-events#guild-ban-remove)                                             | `GuildBanRemove`                      |
| [Guild Emojis Update](https://discord.com/developers/docs/topics/gateway-events#guild-emojis-update)                                       | `GuildEmojisUpdate`                   |
| [Guild Stickers Update](https://discord.com/developers/docs/topics/gateway-events#guild-stickers-update)                                   |                                       |
| [Guild Integrations Update](https://discord.com/developers/docs/topics/gateway-events#guild-integrations-update)                           | `GuildIntegrationsUpdate`             |
| [Guild Member Add](https://discord.com/developers/docs/topics/gateway-events#guild-member-add)                                             | `GuildMemberAdd`                      |
| [Guild Member Remove](https://discord.com/developers/docs/topics/gateway-events#guild-member-remove)                                       | `GuildMemberRemove`                   |
| [Guild Member Update](https://discord.com/developers/docs/topics/gateway-events#guild-member-update)                                       | `GuildMemberUpdate`                   |
| [Guild Members Chunk](https://discord.com/developers/docs/topics/gateway-events#guild-members-chunk)                                       | `GuildMembersChunk`                   |
| [Guild Role Create](https://discord.com/developers/docs/topics/gateway-events#guild-role-create)                                           | `GuildRoleCreate`                     |
| [Guild Role Update](https://discord.com/developers/docs/topics/gateway-events#guild-role-update)                                           | `GuildRoleUpdate`                     |
| [Guild Role Delete](https://discord.com/developers/docs/topics/gateway-events#guild-role-delete)                                           | `GuildRoleDelete`                     |
| [Guild Scheduled Event Create](https://discord.com/developers/docs/topics/gateway-events#guild-scheduled-event-create)                     | `GuildScheduledEventCreate`           |
| [Guild Scheduled Event Update](https://discord.com/developers/docs/topics/gateway-events#guild-scheduled-event-update)                     | `GuildScheduledEventUpdate`           |
| [Guild Scheduled Event Delete](https://discord.com/developers/docs/topics/gateway-events#guild-scheduled-event-delete)                     | `GuildScheduledEventDelete`           |
| [Guild Scheduled Event User Add](https://discord.com/developers/docs/topics/gateway-events#guild-scheduled-event-user-add)                 | `GuildScheduledEventUserAdd`          |
| [Guild Scheduled Event User Remove](https://discord.com/developers/docs/topics/gateway-events#guild-scheduled-event-user-remove)           | `GuildScheduledEventUserRemove`       |
| [Integration Create](https://discord.com/developers/docs/topics/gateway-events#integration-create)                                         |                                       |
| [Integration Update](https://discord.com/developers/docs/topics/gateway-events#integration-update)                                         |                                       |
| [Integration Delete](https://discord.com/developers/docs/topics/gateway-events#integration-delete)                                         |                                       |
| [Interaction Create](https://discord.com/developers/docs/topics/gateway-events#interaction-create)                                         | `InteractionCreate`                   |
| [Invite Create](https://discord.com/developers/docs/topics/gateway-events#invite-create)                                                   | `InviteCreate`                        |
| [Invite Delete](https://discord.com/developers/docs/topics/gateway-events#invite-delete)                                                   | `InviteDelete`                        |
| [Message Create](https://discord.com/developers/docs/topics/gateway-events#message-create)                                                 | `MessageCreate`                       |
| [Message Update](https://discord.com/developers/docs/topics/gateway-events#message-update)                                                 | `MessageUpdate`                       |
| [Message Delete](https://discord.com/developers/docs/topics/gateway-events#message-delete)                                                 | `MessageDelete`                       |
| [Message Delete Bulk](https://discord.com/developers/docs/topics/gateway-events#message-delete-bulk)                                       | `MessageDeleteBulk`                   |
| [Message Reaction Add](https://discord.com/developers/docs/topics/gateway-events#message-reaction-add)                                     | `MessageReactionAdd`                  |
| [Message Reaction Remove](https://discord.com/developers/docs/topics/gateway-events#message-reaction-remove)                               | `MessageReactionAdd`                  |
| [Message Reaction Remove All](https://discord.com/developers/docs/topics/gateway-events#message-reaction-remove-all)                       | `MessageReactionRemoveAll`            |
| [Message Reaction Remove Emoji](https://discord.com/developers/docs/topics/gateway-events#message-reaction-remove-emoji)                   |                                       |
| [Presence Update](https://discord.com/developers/docs/topics/gateway-events#presence-update)                                               | `PresenceUpdate`                      |
| [Stage Instance Create](https://discord.com/developers/docs/topics/gateway-events#stage-instance-create)                                   | `StageInstanceEventCreate`            |
| [Stage Instance Update](https://discord.com/developers/docs/topics/gateway-events#stage-instance-update)                                   | `StageInstanceEventUpdate`            |
| [Stage Instance Delete](https://discord.com/developers/docs/topics/gateway-events#stage-instance-delete)                                   | `StageInstanceEventDelete`            |
| [Typing Start](https://discord.com/developers/docs/topics/gateway-events#typing-start)                                                     | `TypingStart`                         |
| [User Update](https://discord.com/developers/docs/topics/gateway-events#user-update)                                                       | `UserUpdate`                          |
| [Voice State Update](https://discord.com/developers/docs/topics/gateway-events#voice-state-update)                                         | `VoiceServerUpdate`                   |
| [Voice Server Update](https://discord.com/developers/docs/topics/gateway-events#voice-server-update)                                       | `VoiceStateUpdate`                    |
| [Webhooks Update](https://discord.com/developers/docs/topics/gateway-events#webhooks-update)                                               | `VoiceStateUpdate`                    |
| [Message Poll Vote Add](https://discord.com/developers/docs/topics/gateway-events#message-poll-vote-add)                                   |                                       |
| [Message Poll Vote Remove](https://discord.com/developers/docs/topics/gateway-events#message-poll-vote-remove)                             |                                       |
